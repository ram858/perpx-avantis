import { TransportError } from "../../base.js";
import type { HyperliquidEventTarget } from "./_hyperliquid_event_target.js";
/**
 * Error thrown when a WebSocket request fails:
 * - When the WebSocket connection is closed
 * - When the server responds with an error message
 */
export declare class WebSocketRequestError extends TransportError {
    constructor(message: string);
}
/**
 * Manages WebSocket requests to the Hyperliquid API.
 * Handles request creation, sending, and mapping responses to their corresponding requests.
 */
export declare class WebSocketRequestDispatcher {
    private socket;
    /** Last used post request ID */
    private lastId;
    /** Map of pending requests waiting for responses */
    private pending;
    /**
     * Creates a new WebSocket request dispatcher.
     * @param socket - WebSocket connection instance for sending requests to the Hyperliquid WebSocket API
     * @param hlEvents - Used to recognize Hyperliquid responses and match them with sent requests
     */
    constructor(socket: WebSocket, hlEvents: HyperliquidEventTarget);
    /**
     * Sends a request to the Hyperliquid API.
     * @param method - The method of websocket request.
     * @param payload - The payload to send with the request.
     * @param signal - An optional abort signal.
     * @returns A promise that resolves with the parsed JSON response body.
     */
    request(method: "post" | "subscribe" | "unsubscribe", payload: unknown, signal?: AbortSignal): Promise<unknown>;
    /**
     * Normalizes a request object to an ID.
     * @param value - A request object.
     * @returns A stringified request.
     */
    static requestToId(value: unknown): string;
}
//# sourceMappingURL=_websocket_request_dispatcher.d.ts.map